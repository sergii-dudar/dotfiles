#!/usr/bin/env bash

export PATH=$HOME/.cargo/bin:$PATH

PLUGIN_DIR="$CONFIG_DIR/plugins"
ITEM_DIR="$CONFIG_DIR/items" # Directory where the items are configured
SCRIPTS_DIR="$CONFIG_DIR/scripts"
source "$CONFIG_DIR/colors.sh"
source "$CONFIG_DIR/icons.sh"
source "$CONFIG_DIR/settings.sh"

sketchybar --bar position=top \
    height=25 \
    blur_radius=30 \
    color=0x40232634 \
    padding_left=0 \
    padding_right=2

default=(
    padding_left=5
    padding_right=5
    icon.font="CaskaydiaCove Nerd Font:Bold:17.0"
    label.font="CaskaydiaCove Nerd Font:Bold:16.0"
    icon.color=0xff94928F
    label.color=0xff94928F
    #icon.padding_left=4
    #icon.padding_right=4
    #label.padding_left=4
    #label.padding_right=4
    label.y_offset=2
    icon.y_offset=1
    background.height=22
    background.corner_radius=2
    background.color=0xff2e3440
    background.y_offset=1
    background.padding_left=0
    background.padding_right=0
    background.border_width=0
    popup.background.border_width=2
    popup.background.corner_radius=9
    popup.background.border_color="$POPUP_BORDER_COLOR"
    popup.background.color="$POPUP_BACKGROUND_COLOR"
    # popup.height=50
    popup.blur_radius=20
    popup.background.shadow.drawing=on
    scroll_texts=on
)
sketchybar --default "${default[@]}"

# Setting up and starting the helper process
# HELPER=git.felix.helper
# killall helper
# cd "$HOME"/.config/sketchybar/helper && make
# "$HOME"/.config/sketchybar/helper/helper $HELPER > /dev/null 2>&1 &

##### Adding Left Items #####
source "$ITEM_DIR/left/apple.sh"
source "$ITEM_DIR/left/aerospace_scratchpad.sh"
source "$ITEM_DIR/left/runners.sh"
# source "$ITEM_DIR/left/zen.sh"
source "$ITEM_DIR/left/now_playing.sh"
source "$ITEM_DIR/left/front_app.sh"

##### Adding Center Items #####
source "$ITEM_DIR/center/date.sh"
source "$ITEM_DIR/center/aerospace.sh"
source "$ITEM_DIR/center/clock.sh"

##### Adding Right Items #####
source "$ITEM_DIR/right/connections.sh"
source "$ITEM_DIR/right/weather.sh"
source "$ITEM_DIR/right/disk.sh"
source "$ITEM_DIR/right/cpu.sh"
source "$ITEM_DIR/right/ram.sh"
source "$ITEM_DIR/right/battery.sh"
source "$ITEM_DIR/right/volume.sh"
source "$ITEM_DIR/right/brew.sh"
source "$ITEM_DIR/right/input.sh"

sketchybar --hotload on
sketchybar --update