#!/usr/bin/env bash

export PATH=$HOME/.cargo/bin:$PATH

PLUGIN_DIR="$CONFIG_DIR/plugins"
ITEM_DIR="$CONFIG_DIR/items" # Directory where the items are configured
source "$CONFIG_DIR/colors.sh"
source "$CONFIG_DIR/icons.sh"

sketchybar --bar position=top height=25 blur_radius=30 color=0x40232634

default=(
    padding_left=5
    padding_right=5
    icon.font="CaskaydiaCove Nerd Font:Bold:17.0"
    label.font="CaskaydiaCove Nerd Font:Bold:16.0"
    # icon.font="SF Pro:Semibold:17.0"
    # label.font="SF Pro:Semibold:16.0"
    icon.color=0xff94928F
    label.color=0xff94928F
    icon.padding_left=4
    #icon.padding_right=4
    label.padding_left=4
    label.padding_right=4
    label.y_offset=1
    icon.y_offset=1
    background.height=22
    background.corner_radius=2
    # background.color=0xff94928F
    # background.border_width=2
    popup.background.border_width=2
    popup.background.corner_radius=9
    popup.background.border_color="$POPUP_BORDER_COLOR"
    popup.background.color="$POPUP_BACKGROUND_COLOR"
    popup.blur_radius=20
    popup.background.shadow.drawing=on
    scroll_texts=on
)
sketchybar --default "${default[@]}"

# Setting up and starting the helper process
# HELPER=git.felix.helper
# killall helper
# cd "$HOME"/.config/sketchybar/helper && make
# "$HOME"/.config/sketchybar/helper/helper $HELPER > /dev/null 2>&1 &

##### Adding Left Items #####
source "$ITEM_DIR/apple.sh"
source "$ITEM_DIR/aerospace_scratchpad.sh"
# source "$ITEM_DIR/zen.sh"
source "$ITEM_DIR/front_app.sh"
source "$ITEM_DIR/now_playing.sh"

##### Adding Center Items #####
source "$ITEM_DIR/date.sh"
source "$ITEM_DIR/aerospace.sh"
source "$ITEM_DIR/clock.sh"

##### Adding Right Items #####
source "$ITEM_DIR/bluetooth.sh"
source "$ITEM_DIR/wifi.sh"
source "$ITEM_DIR/weather.sh"
source $ITEM_DIR/disk.sh
source $ITEM_DIR/cpu.sh
source $ITEM_DIR/ram.sh
source "$ITEM_DIR/battery.sh"
source "$ITEM_DIR/volume.sh"
source "$ITEM_DIR/brew.sh"
source "$ITEM_DIR/input.sh"

sketchybar --hotload on
sketchybar --update